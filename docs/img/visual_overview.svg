<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="560">
  <defs>
    <style type="text/css"><![CDATA[
      .bg { fill:#0b0e14; }
      .box { fill:#121826; stroke:#6c8bd1; stroke-width:1.5; rx:10; ry:10; }
      .pill { fill:#121826; stroke:#9ad1b6; stroke-width:1.5; rx:18; ry:18; }
      .title { fill:#e6e1cf; font:700 22px 'Consolas', monospace; }
      .label { fill:#e6e1cf; font:500 15px 'Consolas', monospace; }
      .small { fill:#b7c5d3; font:500 13px 'Consolas', monospace; }
      .group { fill:#263043; stroke:#3a4a6b; stroke-dasharray:6 4; rx:12; ry:12; }
      .arrow { stroke:#96a5c0; stroke-width:1.5; marker-end:url(#ah); fill:none; }
      .arrowb { stroke:#9ad1b6; stroke-width:1.5; marker-end:url(#ah); fill:none; }
    ]]></style>
    <marker id="ah" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#96a5c0" />
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="560" />
  <text class="title" x="30" y="40">TEE‑FL on 0G (Galileo) — Visual Overview</text>

  <!-- Groups -->
  <rect class="group" x="30"  y="70"  width="330" height="200"/>
  <text class="small" x="40" y="90">Client (encrypted)</text>

  <rect class="group" x="390" y="70"  width="330" height="200"/>
  <text class="small" x="400" y="90">Provider (TEE / TEE‑sim)</text>

  <rect class="group" x="30"  y="300" width="330" height="220"/>
  <text class="small" x="40" y="320">0G Storage</text>

  <rect class="group" x="390" y="300" width="770" height="220"/>
  <text class="small" x="400" y="320">0G Galileo (EVM)</text>

  <!-- Client path -->
  <rect class="box" x="50" y="110" width="290" height="46"/>
  <text class="label" x="65" y="140">Local data → Encrypt (X25519 + AES‑GCM)</text>

  <rect class="box" x="50" y="170" width="290" height="46"/>
  <text class="label" x="65" y="200">client_update.enc.json + meta</text>

  <!-- Provider TEE -->
  <rect class="box" x="410" y="110" width="290" height="46"/>
  <text class="label" x="425" y="140">Submit update + attestation.json</text>

  <rect class="box" x="410" y="170" width="290" height="46"/>
  <text class="label" x="425" y="200">Access gating (AccessRegistry)</text>

  <!-- Storage -->
  <rect class="pill" x="50" y="350" width="290" height="46"/>
  <text class="label" x="80" y="380">Add file → CID (bafy… / Qm…)</text>

  <!-- Chain (Galileo) -->
  <rect class="box" x="410" y="350" width="250" height="46"/>
  <text class="label" x="425" y="380">EpochManager</text>

  <rect class="box" x="680" y="350" width="220" height="46"/>
  <text class="label" x="695" y="380">Score updates → scoresRoot</text>

  <rect class="box" x="920" y="350" width="220" height="46"/>
  <text class="label" x="935" y="380">FedAvg → Global model</text>

  <rect class="box" x="920" y="410" width="220" height="46"/>
  <text class="label" x="935" y="440">SHA‑256(global_model.json)</text>

  <rect class="pill" x="680" y="410" width="220" height="46"/>
  <text class="label" x="695" y="440">Upload global model → CID</text>

  <rect class="pill" x="410" y="410" width="250" height="46"/>
  <text class="label" x="425" y="440">publishModel(cid, hash, epoch)</text>

  <!-- Orchestrator -->
  <rect class="box" x="750" y="110" width="390" height="46"/>
  <text class="label" x="765" y="140">Orchestrator (round_controller.ps1)</text>

  <!-- Arrows -->
  <line class="arrowb" x1="195" y1="216" x2="195" y2="350"/>
  <line class="arrow"  x1="340" y1="133" x2="410" y2="133"/>
  <line class="arrow"  x1="340" y1="192" x2="410" y2="192"/>
  <line class="arrow"  x1="700" y1="133" x2="750" y2="133"/>
  <line class="arrow"  x1="945" y1="156" x2="945" y2="350"/>
  <line class="arrow"  x1="195" y1="396" x2="410" y2="373"/>
  <line class="arrow"  x1="660" y1="373" x2="680" y2="373"/>
  <line class="arrow"  x1="900" y1="373" x2="920" y2="373"/>
  <line class="arrow"  x1="1030" y1="396" x2="790"  y2="433"/>
  <line class="arrow"  x1="790"  y1="433" x2="660"  y2="433"/>
  <line class="arrow"  x1="660"  y1="433" x2="535"  y2="433"/>
  <line class="arrow"  x1="535"  y1="433" x2="535"  y2="396"/>
  <line class="arrow"  x1="845"  y1="156" x2="535"  y2="350"/>

  <text class="small" x="30" y="528">Notes: Only TEEs decrypt; scoresRoot + model hash/CID anchored on‑chain; storage may be 0G or IPFS‑compatible.</text>
</svg>
