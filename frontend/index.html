<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <base href="./">
    <title>TEE-FL-0G Mainnet Dashboard | Balkeum Labs</title>
    <meta name="description" content="Federated Learning on 0G Mainnet - Live deployment dashboard showing contracts, transactions, and pipeline execution">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <h1 class="title">TEE-FL-0G</h1>
                    <p class="subtitle">Federated Learning on 0G Mainnet</p>
                </div>
                <div class="status-badge">
                    <span class="status-dot active"></span>
                    <span class="status-text">Mainnet Active</span>
                </div>
            </div>
        </header>

        <!-- Overview Section -->
        <section class="overview-section">
            <div class="overview-card">
                <div class="overview-content">
                    <div class="overview-intro">
                        <p class="overview-text">
                            This dashboard showcases a <strong>Federated Learning system</strong> deployed on <strong>0G Mainnet</strong>. 
                            Federated Learning allows multiple parties to train a shared AI model without sharing their private data.
                        </p>
                    </div>
                    <div class="overview-highlight">
                        <div class="highlight-content">
                            <h3 class="highlight-title">What happened:</h3>
                            <p class="highlight-text">
                                We successfully deployed smart contracts (AccessRegistry and EpochManager) on 0G Mainnet 
                                and ran a complete federated learning pipeline end-to-end. This included:
                            </p>
                        </div>
                    </div>
                    <ul class="overview-list">
                        <li>
                            <span class="list-number">1</span>
                            <span class="list-text">Starting Epoch 1 with an initial model hash</span>
                        </li>
                        <li>
                            <span class="list-number">2</span>
                            <span class="list-text">Submitting an encrypted model update (without exposing private data)</span>
                        </li>
                        <li>
                            <span class="list-number">3</span>
                            <span class="list-text">Computing contribution scores for the update</span>
                        </li>
                        <li>
                            <span class="list-number">4</span>
                            <span class="list-text">Aggregating updates using FedAvg (Federated Averaging)</span>
                        </li>
                        <li>
                            <span class="list-number">5</span>
                            <span class="list-text">Publishing the global model on-chain</span>
                        </li>
                    </ul>
                    <div class="overview-success">
                        <div class="success-badge">
                            <span class="success-text"><strong>All 4 transactions succeeded</strong> and are verified on the 0G blockchain.</span>
                        </div>
                        <p class="overview-text">
                            The dashboard below shows the contract addresses, transaction history, and pipeline execution details.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Integration Badges -->
        <section class="integration-badges-section">
            <h2 class="section-title">Integration Status</h2>
            <div class="badges-grid">
                <div class="integration-badge badge-success">
                    <div class="badge-icon">✓</div>
                    <div class="badge-content">
                        <div class="badge-title">0G Mainnet</div>
                        <div class="badge-description">Deployed & Active</div>
                    </div>
                </div>
                <div class="integration-badge badge-success">
                    <div class="badge-icon">✓</div>
                    <div class="badge-content">
                        <div class="badge-title">0G Storage</div>
                        <div class="badge-description">Uploads Working</div>
                    </div>
                </div>
                <div class="integration-badge badge-success">
                    <div class="badge-icon">✓</div>
                    <div class="badge-content">
                        <div class="badge-title">Smart Contracts</div>
                        <div class="badge-description">AccessRegistry & EpochManager</div>
                    </div>
                </div>
                <div class="integration-badge badge-warning">
                    <div class="badge-icon">⏳</div>
                    <div class="badge-content">
                        <div class="badge-title">0G Marketplace</div>
                        <div class="badge-description">SDK Issue (Awaiting Fix)</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Statistics Panel -->
        <section class="statistics-section">
            <h2 class="section-title">Statistics</h2>
            <div class="statistics-grid">
                <div class="stat-card stat-primary">
                    <div class="stat-label">Total Transactions</div>
                    <div class="stat-value" id="stat-total-tx">4</div>
                    <div class="stat-description">Pipeline execution</div>
                </div>
                <div class="stat-card stat-success">
                    <div class="stat-label">Success Rate</div>
                    <div class="stat-value" id="stat-success-rate">100%</div>
                    <div class="stat-description">All transactions succeeded</div>
                </div>
                <div class="stat-card stat-info">
                    <div class="stat-label">Total Gas Used</div>
                    <div class="stat-value" id="stat-total-gas">Loading...</div>
                    <div class="stat-description">All pipeline transactions</div>
                </div>
                <div class="stat-card stat-warning">
                    <div class="stat-label">Pipeline Duration</div>
                    <div class="stat-value" id="stat-pipeline-duration">Loading...</div>
                    <div class="stat-description" id="stat-block-time">Block time: <span id="block-time-value">~2s</span></div>
                </div>
                <div class="stat-card stat-primary">
                    <div class="stat-label">Average Gas per TX</div>
                    <div class="stat-value" id="stat-avg-gas">Loading...</div>
                    <div class="stat-description">Cost efficiency</div>
                </div>
            </div>
        </section>

        <!-- Network Info & Health -->
        <section class="network-info">
            <h2 class="section-title">Network Information</h2>
            <div class="info-card">
                <div class="info-item">
                    <span class="info-label">Network</span>
                    <span class="info-value status-active">0G Mainnet</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Chain ID</span>
                    <span class="info-value">16661</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Block Explorer</span>
                    <a href="https://chainscan.0g.ai" target="_blank" class="info-link">chainscan.0g.ai</a>
                </div>
                <div class="info-item">
                    <span class="info-label">Deployed</span>
                    <span class="info-value" id="deployment-date">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Current Block</span>
                    <span class="info-value" id="current-block">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Network Health</span>
                    <span class="info-value status-success" id="network-health">Healthy</span>
                </div>
            </div>
        </section>

        <!-- Contract Addresses -->
        <section class="contracts-section">
            <h2 class="section-title">Smart Contracts</h2>
            <div class="contracts-grid">
                <div class="contract-card">
                    <div class="contract-header">
                        <h3 class="contract-name">AccessRegistry</h3>
                        <span class="contract-badge">Access Control</span>
                    </div>
                    <div class="contract-address" id="access-registry-address">Loading...</div>
                    <a href="#" id="access-registry-link" target="_blank" class="explorer-link">
                        View on Block Explorer →
                    </a>
                </div>
                <div class="contract-card">
                    <div class="contract-header">
                        <h3 class="contract-name">EpochManager</h3>
                        <span class="contract-badge">Epoch Lifecycle</span>
                    </div>
                    <div class="contract-address" id="epoch-manager-address">Loading...</div>
                    <a href="#" id="epoch-manager-link" target="_blank" class="explorer-link">
                        View on Block Explorer →
                    </a>
                </div>
            </div>
        </section>

        <!-- Pipeline Visualization -->
        <section class="pipeline-section">
            <h2 class="section-title">Federated Learning Pipeline - Epoch 1</h2>
            <div class="pipeline-flow-container">
                <div class="pipeline-flow-diagram">
                    <div class="pipeline-step completed animated" data-step="1">
                        <div class="step-connector step-connector-right"></div>
                        <div class="step-icon-wrapper">
                            <div class="step-icon">1</div>
                            <div class="step-pulse"></div>
                        </div>
                        <div class="step-content">
                            <h3 class="step-title">Start Epoch</h3>
                            <p class="step-description">Initialize epoch with model hash</p>
                            <button class="step-toggle" onclick="toggleStepDetails(1)">View Details</button>
                            <div class="step-details expandable" id="step-1-details">Loading...</div>
                        </div>
                    </div>
                    <div class="pipeline-connection">
                        <div class="connection-line"></div>
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="pipeline-step completed animated" data-step="2">
                        <div class="step-connector step-connector-left"></div>
                        <div class="step-connector step-connector-right"></div>
                        <div class="step-icon-wrapper">
                            <div class="step-icon">2</div>
                            <div class="step-pulse"></div>
                        </div>
                        <div class="step-content">
                            <h3 class="step-title">Submit Update</h3>
                            <p class="step-description">Encrypted model update submitted</p>
                            <button class="step-toggle" onclick="toggleStepDetails(2)">View Details</button>
                            <div class="step-details expandable" id="step-2-details">Loading...</div>
                        </div>
                    </div>
                    <div class="pipeline-connection">
                        <div class="connection-line"></div>
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="pipeline-step completed animated" data-step="3">
                        <div class="step-connector step-connector-left"></div>
                        <div class="step-connector step-connector-right"></div>
                        <div class="step-icon-wrapper">
                            <div class="step-icon">3</div>
                            <div class="step-pulse"></div>
                        </div>
                        <div class="step-content">
                            <h3 class="step-title">Compute Scores</h3>
                            <p class="step-description">Contribution scores calculated</p>
                            <button class="step-toggle" onclick="toggleStepDetails(3)">View Details</button>
                            <div class="step-details expandable" id="step-3-details">Loading...</div>
                        </div>
                    </div>
                    <div class="pipeline-connection">
                        <div class="connection-line"></div>
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="pipeline-step completed animated" data-step="4">
                        <div class="step-connector step-connector-left"></div>
                        <div class="step-icon-wrapper">
                            <div class="step-icon">4</div>
                            <div class="step-pulse"></div>
                        </div>
                        <div class="step-content">
                            <h3 class="step-title">Publish Model</h3>
                            <p class="step-description">Global model aggregated & published</p>
                            <button class="step-toggle" onclick="toggleStepDetails(4)">View Details</button>
                            <div class="step-details expandable" id="step-4-details">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Epoch Progress -->
            <div class="epoch-progress-container">
                <div class="epoch-progress-label">Epoch 1 Progress</div>
                <div class="epoch-progress-bar">
                    <div class="epoch-progress-fill" id="epoch-progress-fill"></div>
                </div>
                <div class="epoch-progress-text" id="epoch-progress-text">100% Complete</div>
            </div>
        </section>

        <!-- Transaction History -->
        <section class="transactions-section">
            <h2 class="section-title">Transaction History</h2>
            <div class="transactions-list" id="transactions-list">
                <!-- Transactions will be loaded here -->
            </div>
            <div class="pipeline-timing-summary" id="pipeline-timing-summary">
                <!-- Pipeline timing summary will be loaded here -->
            </div>
        </section>

        <!-- Epoch Summary -->
        <section class="epoch-summary">
            <h2 class="section-title">Epoch 1 Summary</h2>
            <div class="summary-grid">
                <div class="summary-card expandable-card" onclick="toggleExpandable(this)">
                    <span class="summary-label">Model Hash</span>
                    <span class="summary-value" id="model-hash">Loading...</span>
                    <div class="expandable-content">
                        <div class="full-hash" id="full-model-hash">Loading...</div>
                    </div>
                </div>
                <div class="summary-card expandable-card" onclick="toggleExpandable(this)">
                    <span class="summary-label">Scores Root</span>
                    <span class="summary-value" id="scores-root">Loading...</span>
                    <div class="expandable-content">
                        <div class="full-hash" id="full-scores-root">Loading...</div>
                    </div>
                </div>
                <div class="summary-card expandable-card" onclick="toggleExpandable(this)">
                    <span class="summary-label">Global Model CID</span>
                    <span class="summary-value" id="global-model-cid">Loading...</span>
                    <div class="expandable-content">
                        <div class="full-hash" id="full-global-model-cid">Loading...</div>
                    </div>
                </div>
                <div class="summary-card expandable-card" onclick="toggleExpandable(this)">
                    <span class="summary-label">Global Model Hash</span>
                    <span class="summary-value" id="global-model-hash">Loading...</span>
                    <div class="expandable-content">
                        <div class="full-hash" id="full-global-model-hash">Loading...</div>
                    </div>
                </div>
                <div class="summary-card">
                    <span class="summary-label">Status</span>
                    <span class="summary-value status-published">Published</span>
                </div>
            </div>
        </section>

        <!-- 0G Storage Status -->
        <section class="storage-section">
            <h2 class="section-title">0G Storage Integration</h2>
            <div class="storage-card">
                <div class="storage-status">
                    <span class="status-dot active"></span>
                    <span class="storage-status-text">Uploads Working</span>
                </div>
                <div class="storage-details" id="storage-details">
                    <!-- Storage details will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p class="footer-text">
                    Built by <strong>Balkeum Labs</strong> | 
                    <a href="https://github.com/balkeumlabs/tee-fl-0g" target="_blank" class="footer-link">View on GitHub</a> |
                    <a href="https://github.com/balkeumlabs/tee-fl-0g/blob/main/docs/MAINNET_PIPELINE_TEST_EXPLANATION.md" target="_blank" class="footer-link">Detailed Explanation</a>
                </p>
                <p class="footer-timestamp">Last updated: <span id="last-updated">Loading...</span></p>
            </div>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
